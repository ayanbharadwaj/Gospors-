import React from 'react';
import { Link } from 'react-router-dom';
import { createPageUrl } from '@/utils';
import { MapPin, Users, Flame, Heart, Bookmark, Play, Eye } from 'lucide-react';
import { Button } from '@/components/ui/button';

export default function AthleteCard({ 
  athlete, 
  isLiked, 
  isBookmarked, 
  onToggleLike, 
  onToggleBookmark 
}) {
  const sportEmojis = {
    'Basketball': 'ğŸ€',
    'Soccer': 'âš½',
    'Track & Field': 'ğŸƒ',
    'Tennis': 'ğŸ¾',
    'Football': 'ğŸˆ',
    'Swimming': 'ğŸŠ',
    'Baseball': 'âš¾',
    'Volleyball': 'ğŸ',
    'Other': 'ğŸ…'
  };

  return (
    <div className="bg-white rounded-3xl shadow-sm hover:shadow-xl transition-all border border-gray-100 overflow-hidden group">
      {/* Header */}
      <div className="p-6 pb-4">
        <div className="flex items-start justify-between mb-4">
          <div className="flex items-center gap-3">
            <div className="w-14 h-14 bg-orange-500 rounded-full flex items-center justify-center">
                                {athlete.profile_image_url ? (
                                  <img 
                                    src={athlete.profile_image_url} 
                                    alt={athlete.name}
                                    className="w-full h-full object-cover rounded-full"
                                  />
                                ) : (
                                  <svg className="w-8 h-8 text-white" viewBox="0 0 24 24" fill="currentColor"><path d="M2 19h20v3H2v-3zm2-9l4 4 4-6 4 6 4-4v9H4v-9z"/></svg>
                                )}
            </div>
            <div>
              <div className="flex items-center gap-2">
                <h3 className="font-bold text-lg">{athlete.name}</h3>
                {athlete.is_trending && (
                  <div className="bg-gradient-to-r from-orange-400 to-red-400 text-white text-xs px-2 py-1 rounded-full font-bold flex items-center gap-1">
                    <Flame className="w-3 h-3" />
                    Trending
                  </div>
                )}
              </div>
              <p className="text-gray-500 text-sm">
                {athlete.username ? `@${athlete.username}` : ''} 
                {athlete.age ? ` Â· ${athlete.age} years old` : ''}
              </p>
            </div>
          </div>
          <button 
            onClick={(e) => {
              e.preventDefault();
              onToggleBookmark?.(athlete.id);
            }}
            className="text-gray-400 hover:text-orange-600 transition"
          >
            <Bookmark className={`w-6 h-6 ${isBookmarked ? 'fill-orange-600 text-orange-600' : ''}`} />
          </button>
        </div>

        <div className="flex items-center gap-3 flex-wrap text-sm text-gray-600 mb-4">
          {athlete.location && (
            <div className="flex items-center gap-1">
              <MapPin className="w-4 h-4" />
              <span>{athlete.location}</span>
            </div>
          )}
          <div className="bg-orange-100 text-orange-700 px-3 py-1 rounded-full font-bold">
            {athlete.sport}
          </div>
          {athlete.followers_count > 0 && (
            <div className="flex items-center gap-1 text-gray-500">
              <Users className="w-4 h-4" />
              <span>{athlete.followers_count.toLocaleString()} followers</span>
            </div>
          )}
        </div>

        <p className="text-gray-700 leading-relaxed mb-4 line-clamp-3">{athlete.story}</p>

        {/* Stats */}
        {athlete.stats && Object.keys(athlete.stats).length > 0 && (
          <div className="bg-gradient-to-r from-gray-50 to-orange-50 rounded-2xl p-4 mb-4">
            <div className="grid grid-cols-3 gap-4 text-center">
              {Object.entries(athlete.stats).slice(0, 3).map(([key, value]) => (
                <div key={key}>
                  <div className="font-black text-2xl bg-gradient-to-r from-orange-500 to-orange-600 bg-clip-text text-transparent">
                    {value}
                  </div>
                  <div className="text-xs text-gray-600 font-semibold uppercase">{key}</div>
                </div>
              ))}
            </div>
          </div>
        )}

        {/* Needs */}
        {athlete.needs && athlete.needs.length > 0 && (
          <div className="mb-4">
            <h4 className="font-bold text-sm mb-2 text-gray-700">Current Needs:</h4>
            <div className="flex flex-wrap gap-2">
              {athlete.needs.slice(0, 3).map((need, index) => (
                <span key={index} className="bg-yellow-50 text-yellow-700 px-3 py-1 rounded-full text-sm font-semibold border border-yellow-200">
                  {need}
                </span>
              ))}
              {athlete.needs.length > 3 && (
                <span className="bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-sm font-semibold">
                  +{athlete.needs.length - 3} more
                </span>
              )}
            </div>
          </div>
        )}

        {/* Highlights Button */}
        {athlete.highlight_url && (
          <a 
            href={athlete.highlight_url}
            target="_blank"
            rel="noopener noreferrer"
            className="w-full bg-gradient-to-r from-red-500 to-pink-500 text-white rounded-xl py-3 font-bold flex items-center justify-center gap-2 hover:scale-[1.02] transition-transform mb-4"
          >
            <Play className="w-5 h-5 fill-white" />
            Watch Highlights
          </a>
        )}
      </div>

      {/* Actions Bar */}
      <div className="border-t border-gray-100 px-6 py-4 flex items-center justify-between">
        <button 
          onClick={(e) => {
            e.preventDefault();
            onToggleLike?.(athlete.id);
          }}
          className="flex items-center gap-2 text-gray-600 hover:text-red-500 transition font-semibold"
        >
          <Heart className={`w-6 h-6 ${isLiked ? 'fill-red-500 text-red-500' : ''}`} />
          <span>Support</span>
        </button>
        <Link 
          to={`${createPageUrl('AthleteProfile')}?id=${athlete.id}`}
          className="flex items-center gap-2 text-gray-600 hover:text-orange-600 transition font-semibold"
        >
          <Eye className="w-6 h-6" />
          <span>View Profile</span>
        </Link>
      </div>
    </div>
  );
}
